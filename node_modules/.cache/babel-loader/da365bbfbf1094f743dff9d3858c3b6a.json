{"ast":null,"code":"import _regeneratorRuntime from\"F:/online/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"F:/online/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"F:/online/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"F:/online/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Table,Modal,Button,Form}from'react-bootstrap';import\"./Admin_home.css\";import{db}from'../../firebase';import Admin_navbar from'./Admin_navbar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Example(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var handleClose=function handleClose(){return setShow(false);};var handleShow=function handleShow(){return setShow(true);};var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),lgShow=_useState4[0],setLgShow=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),key=_useState6[0],setKey=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),category=_useState8[0],setCategory=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),title=_useState10[0],setName=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),price=_useState12[0],setPrice=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),qty=_useState14[0],setQty=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),desc=_useState16[0],setDesc=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),img=_useState18[0],setImg=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),loader=_useState20[0],setLoader=_useState20[1];// Edit Product\nvar _useState21=useState(null),_useState22=_slicedToArray(_useState21,2),editKey=_useState22[0],setEditKey=_useState22[1];var _useState23=useState(price),_useState24=_slicedToArray(_useState23,2),editPrice=_useState24[0],setEditPrice=_useState24[1];var _useState25=useState(qty),_useState26=_slicedToArray(_useState25,2),editQty=_useState26[0],setEditQty=_useState26[1];var handleSubmit=function handleSubmit(e){e.preventDefault();setLoader(true);db.collection(\"products\").add({key:key,category:category,title:title,price:price,qty:qty,desc:desc,img:img}).then(function(){handleClose(false);setLoader(false);fetchPro();alert(\"Your product has been submittedüëç\");}).catch(function(error){alert(error.message);setLoader(false);});setKey(\"\");setCategory(\"\");setPrice(\"\");setQty(\"\");setName(\"\");setDesc(\"\");setImg(\"\");};//  FECTH DATA\nvar _useState27=useState([]),_useState28=_slicedToArray(_useState27,2),pro=_useState28[0],setPro=_useState28[1];window.addEventListener('load',function(){fetchPro();});var fetchPro=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setPro([]);response=db.collection('products');_context.next=4;return response.get();case 4:data=_context.sent;data.docs.forEach(function(item){setPro(function(pro){return[].concat(_toConsumableArray(pro),[item.data()]);});});case 6:case\"end\":return _context.stop();}}},_callee);}));return function fetchPro(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchPro();},[]);// Edit Product\nvar onEditButtonClicked=function onEditButtonClicked(key){//  console.log(\"key =\" + key);\nsetLgShow(true);setEditKey(key);};var setEditChanges=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var index,docId,res,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:index=-1;docId=\"\";// referring the firebase database with collection name products\nres=db.collection(\"products\");_context2.next=5;return res.get();case 5:data=_context2.sent;//iterating the prducts received from database\ndata.docs.forEach(function(item,i){// checking which product needs to be edited\nif(item.data().key==editKey){docId=item.id;index=i;}});if(!(docId!=\"\")){_context2.next=10;break;}_context2.next=10;return res.doc(docId).update({price:editPrice,qty:editQty})//handling the success\n.//handling the success\nthen(function(){var updatedProduct=pro[index];updatedProduct.price=editPrice;updatedProduct.qty=editQty;var products=pro;products[index]=updatedProduct;setPro(products);alert(\"Changes have been made sucessfully !!\");})//handling the error\n.//handling the error\ncatch(function(){alert(\"Changes cannot be made !!\");});case 10:setEditPrice(\"\");setEditQty(\"\");setLgShow(false);case 13:case\"end\":return _context2.stop();}}},_callee2);}));return function setEditChanges(){return _ref2.apply(this,arguments);};}();//delete data\nvar deleteData=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var docId,res,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:docId=\"\";res=db.collection(\"products\");_context3.next=4;return res.get();case 4:data=_context3.sent;data.docs.forEach(function(item){// console.log(item.data());\nif(item.data().key==editKey){docId=item.id;}});if(!(docId!=\"\")){_context3.next=9;break;}_context3.next=9;return res.doc(docId).delete().then(function(){alert(\"Product Deleted!!\");});case 9:case\"end\":return _context3.stop();}}},_callee3);}));return function deleteData(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:\" #e1e5ea\"},children:[/*#__PURE__*/_jsx(Admin_navbar,{}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row col-md-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsxs(\"dl\",{className:\"menu_list\",children:[/*#__PURE__*/_jsx(\"dd\",{className:\"menu_heading\",children:\"Menu\"}),/*#__PURE__*/_jsx(\"dd\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/Admin_product\",style:{color:\"#bd965b\"},className:\"admin_link\",children:\"Add Product\"})}),/*#__PURE__*/_jsx(\"dd\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/Admin_contact\",className:\"admin_link\",children:\"Contact Us\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"category_menu col-md-9 \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row category_row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"category_heading col-md-10\",children:\"Product\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2 \",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleShow,className:\"add_category\",children:\"Add Product\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12 p-3 category_table\",children:/*#__PURE__*/_jsxs(Table,{responsive:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Edit\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Delete\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:pro&&pro.map(function(products){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:products.key}),/*#__PURE__*/_jsx(\"td\",{children:products.category}),/*#__PURE__*/_jsx(\"td\",{children:products.title}),/*#__PURE__*/_jsx(\"td\",{children:products.desc}),/*#__PURE__*/_jsx(\"td\",{children:products.price}),/*#__PURE__*/_jsx(\"td\",{children:products.qty}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return onEditButtonClicked(products.key);},className:\"btn-dark\",children:\"Edit\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{className:\"btn-dark\",onClick:function onClick(){return deleteData(products.key);},children:\"Delete\"})})]});})})]})})]})]})})]}),/*#__PURE__*/_jsxs(Modal,{show:show,onHide:handleClose,backdrop:\"static\",keyboard:false,centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Add Product\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{id:\"key\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Id\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",required:true,placeholder:\"Enter id\",value:key,onChange:function onChange(e){return setKey(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{id:\"category\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Category\"}),/*#__PURE__*/_jsxs(Form.Control,{as:\"select\",required:true,placeholder:\"Enter category\",value:category,onChange:function onChange(e){return setCategory(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{children:\"Click to Choose\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Fashion\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Electronics\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Grocery\"})]})]}),/*#__PURE__*/_jsxs(Form.Group,{id:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",required:true,placeholder:\"Enter Name\",value:title,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{id:\"description\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Description\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",rows:\"3\",required:true,placeholder:\"Type a Description\",value:desc,onChange:function onChange(e){return setDesc(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{id:\"price\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Price\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",required:true,placeholder:\"Enter Price\",value:price,onChange:function onChange(e){return setPrice(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{id:\"qty\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Quantity\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",required:true,placeholder:\"Enter Quantity\",value:qty,onChange:function onChange(e){return setQty(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{id:\"image\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Image\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"string\",required:true,placeholder:\"Upload Image\",value:img,onChange:function onChange(e){return setImg(e.target.value);}})]}),/*#__PURE__*/_jsx(Button,{className:\"w-100 mt-3\",style:{background:loader?'afb9c8':'#34656d'},type:\"submit\",children:\"Submit\"})]})})]}),/*#__PURE__*/_jsxs(Modal,{show:lgShow,onHide:function onHide(){return setLgShow(false);},\"aria-labelledby\":\"example-modal-sizes-title-lg\",centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Edit Product\"})}),/*#__PURE__*/_jsxs(Modal.Body,{id:\"example-modal-sizes-title-lg\",children:[/*#__PURE__*/_jsxs(Form.Group,{id:\"price\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Price\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",required:true,placeholder:\"Enter Price\",value:editPrice,onChange:function onChange(e){return setEditPrice(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{id:\"qty\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Quantity\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",required:true,placeholder:\"Enter Quantity\",value:editQty,onChange:function onChange(e){return setEditQty(e.target.value);}})]}),/*#__PURE__*/_jsx(Button,{onClick:setEditChanges,className:\"w-100 mt-3\",style:{background:loader?'afb9c8':'#34656d'},type:\"submit\",children:\"Submit\"})]})]})]});}export default Example;","map":{"version":3,"sources":["F:/online/src/components/Admin/Admin_product.js"],"names":["React","useState","useEffect","Table","Modal","Button","Form","db","Admin_navbar","Example","show","setShow","handleClose","handleShow","lgShow","setLgShow","key","setKey","category","setCategory","title","setName","price","setPrice","qty","setQty","desc","setDesc","img","setImg","loader","setLoader","editKey","setEditKey","editPrice","setEditPrice","editQty","setEditQty","handleSubmit","e","preventDefault","collection","add","then","fetchPro","alert","catch","error","message","pro","setPro","window","addEventListener","response","get","data","docs","forEach","item","onEditButtonClicked","setEditChanges","index","docId","res","i","id","doc","update","updatedProduct","products","deleteData","delete","backgroundColor","color","map","target","value","background"],"mappings":"qXAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAwBC,SAAxB,KAAwC,OAAxC,CACA,OAAQC,KAAR,CAAcC,KAAd,CAAoBC,MAApB,CAA2BC,IAA3B,KAAsC,iBAAtC,CACA,MAAO,kBAAP,CACA,OAAQC,EAAR,KAAiB,gBAAjB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,C,6IAGA,QAASC,CAAAA,OAAT,EAAmB,CACf,cAAwBR,QAAQ,CAAC,KAAD,CAAhC,wCAAOS,IAAP,eAAaC,OAAb,eACA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,SAAMD,CAAAA,OAAO,CAAC,KAAD,CAAb,EAApB,CACA,GAAME,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,SAAMF,CAAAA,OAAO,CAAC,IAAD,CAAb,EAAnB,CACA,eAA4BV,QAAQ,CAAC,KAAD,CAApC,yCAAOa,MAAP,eAAeC,SAAf,eAGF,eAAsBd,QAAQ,CAAC,EAAD,CAA9B,yCAAOe,GAAP,eAAYC,MAAZ,eACA,eAAgChB,QAAQ,CAAC,EAAD,CAAxC,yCAAOiB,QAAP,eAAiBC,WAAjB,eACA,eAAyBlB,QAAQ,CAAC,EAAD,CAAjC,0CAAOmB,KAAP,gBAAcC,OAAd,gBACA,gBAA0BpB,QAAQ,CAAC,EAAD,CAAlC,2CAAOqB,KAAP,gBAAcC,QAAd,gBACA,gBAAsBtB,QAAQ,CAAC,EAAD,CAA9B,2CAAOuB,GAAP,gBAAYC,MAAZ,gBACA,gBAAwBxB,QAAQ,CAAC,EAAD,CAAhC,2CAAOyB,IAAP,gBAAaC,OAAb,gBACA,gBAAoB1B,QAAQ,CAAC,EAAD,CAA5B,2CAAO2B,GAAP,gBAAWC,MAAX,gBACA,gBAA4B5B,QAAQ,CAAC,KAAD,CAApC,2CAAO6B,MAAP,gBAAeC,SAAf,gBAEA;AACA,gBAA8B9B,QAAQ,CAAC,IAAD,CAAtC,2CAAO+B,OAAP,gBAAgBC,UAAhB,gBACA,gBAAkChC,QAAQ,CAACqB,KAAD,CAA1C,2CAAOY,SAAP,gBAAkBC,YAAlB,gBACA,gBAA8BlC,QAAQ,CAACuB,GAAD,CAAtC,2CAAOY,OAAP,gBAAgBC,UAAhB,gBAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CAC1BA,CAAC,CAACC,cAAF,GACAT,SAAS,CAAC,IAAD,CAAT,CAEAxB,EAAE,CAACkC,UAAH,CAAc,UAAd,EACGC,GADH,CACO,CACH1B,GAAG,CAACA,GADD,CAEHE,QAAQ,CAACA,QAFN,CAGHE,KAAK,CAACA,KAHH,CAIHE,KAAK,CAACA,KAJH,CAKHE,GAAG,CAACA,GALD,CAMHE,IAAI,CAACA,IANF,CAOHE,GAAG,CAACA,GAPD,CADP,EAUGe,IAVH,CAUQ,UAAM,CACV/B,WAAW,CAAC,KAAD,CAAX,CACAmB,SAAS,CAAC,KAAD,CAAT,CACAa,QAAQ,GACRC,KAAK,CAAC,mCAAD,CAAL,CACD,CAfH,EAgBGC,KAhBH,CAgBS,SAACC,KAAD,CAAW,CAChBF,KAAK,CAACE,KAAK,CAACC,OAAP,CAAL,CACAjB,SAAS,CAAC,KAAD,CAAT,CACD,CAnBH,EAqBAd,MAAM,CAAC,EAAD,CAAN,CACAE,WAAW,CAAC,EAAD,CAAX,CACAI,QAAQ,CAAC,EAAD,CAAR,CACAE,MAAM,CAAC,EAAD,CAAN,CACAJ,OAAO,CAAC,EAAD,CAAP,CACAM,OAAO,CAAC,EAAD,CAAP,CACAE,MAAM,CAAC,EAAD,CAAN,CAEC,CAjCH,CAoCE;AAEC,gBAAmB5B,QAAQ,CAAC,EAAD,CAA3B,2CAAOgD,GAAP,gBAAWC,MAAX,gBACAC,MAAM,CAACC,gBAAP,CAAwB,MAAxB,CAAgC,UAAM,CACrCR,QAAQ,GACT,CAFA,EAGA,GAAMA,CAAAA,QAAQ,0FAAC,qJACbM,MAAM,CAAC,EAAD,CAAN,CACMG,QAFO,CAEE9C,EAAE,CAACkC,UAAH,CAAc,UAAd,CAFF,uBAGIY,CAAAA,QAAQ,CAACC,GAAT,EAHJ,QAGPC,IAHO,eAIbA,IAAI,CAACC,IAAL,CAAUC,OAAV,CAAkB,SAAAC,IAAI,CAAE,CACvBR,MAAM,CAAC,SAAAD,GAAG,qCAAMA,GAAN,GAAUS,IAAI,CAACH,IAAL,EAAV,IAAJ,CAAN,CACA,CAFD,EAJa,sDAAD,kBAARX,CAAAA,QAAQ,0CAAd,CAQA1C,SAAS,CAAC,UAAM,CACd0C,QAAQ,GACT,CAFQ,CAEN,EAFM,CAAT,CAIA;AAEA,GAAMe,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAAC3C,GAAD,CAAS,CACpC;AACAD,SAAS,CAAC,IAAD,CAAT,CACAkB,UAAU,CAACjB,GAAD,CAAV,CACA,CAJD,CAMA,GAAM4C,CAAAA,cAAc,2FAAG,iKAClBC,KADkB,CACV,CAAC,CADS,CAElBC,KAFkB,CAEV,EAFU,CAGtB;AACMC,GAJgB,CAIVxD,EAAE,CAACkC,UAAH,CAAc,UAAd,CAJU,wBAKHsB,CAAAA,GAAG,CAACT,GAAJ,EALG,QAKhBC,IALgB,gBAMtB;AACAA,IAAI,CAACC,IAAL,CAAUC,OAAV,CAAkB,SAACC,IAAD,CAAOM,CAAP,CAAa,CAE7B;AACA,GAAGN,IAAI,CAACH,IAAL,GAAYvC,GAAZ,EAAmBgB,OAAtB,CAA+B,CAC7B8B,KAAK,CAAGJ,IAAI,CAACO,EAAb,CACAJ,KAAK,CAAGG,CAAR,CACD,CACF,CAPD,EAPsB,KAiBnBF,KAAK,EAAI,EAjBU,oDAmBdC,CAAAA,GAAG,CAACG,GAAJ,CAAQJ,KAAR,EAAeK,MAAf,CAAsB,CAC1B7C,KAAK,CAACY,SADoB,CAE1BV,GAAG,CAACY,OAFsB,CAAtB,CAIN;AAJM,CAIN;AACCO,IALK,CAKA,UAAM,CACV,GAAIyB,CAAAA,cAAc,CAAGnB,GAAG,CAACY,KAAD,CAAxB,CACAO,cAAc,CAAC9C,KAAf,CAAuBY,SAAvB,CACAkC,cAAc,CAAC5C,GAAf,CAAqBY,OAArB,CACA,GAAIiC,CAAAA,QAAQ,CAAGpB,GAAf,CACAoB,QAAQ,CAACR,KAAD,CAAR,CAAkBO,cAAlB,CACAlB,MAAM,CAACmB,QAAD,CAAN,CACAxB,KAAK,CAAC,uCAAD,CAAL,CAED,CAdK,CAeN;AAfM,CAeN;AACCC,KAhBK,CAgBC,UAAM,CACXD,KAAK,CAAC,2BAAD,CAAL,CACD,CAlBK,CAnBc,SAwCrBV,YAAY,CAAC,EAAD,CAAZ,CACAE,UAAU,CAAC,EAAD,CAAV,CACAtB,SAAS,CAAC,KAAD,CAAT,CA1CqB,yDAAH,kBAAd6C,CAAAA,cAAc,2CAApB,CA6CA;AACA,GAAMU,CAAAA,UAAU,2FAAG,2JAClBR,KADkB,CACV,EADU,CAEhBC,GAFgB,CAEVxD,EAAE,CAACkC,UAAH,CAAc,UAAd,CAFU,wBAGHsB,CAAAA,GAAG,CAACT,GAAJ,EAHG,QAGhBC,IAHgB,gBAItBA,IAAI,CAACC,IAAL,CAAUC,OAAV,CAAkB,SAACC,IAAD,CAAU,CAC1B;AACA,GAAGA,IAAI,CAACH,IAAL,GAAYvC,GAAZ,EAAmBgB,OAAtB,CAA+B,CAC7B8B,KAAK,CAAGJ,IAAI,CAACO,EAAb,CACD,CACF,CALD,EAJsB,KAUnBH,KAAK,EAAI,EAVU,kDAWdC,CAAAA,GAAG,CAACG,GAAJ,CAAQJ,KAAR,EAAeS,MAAf,GACL5B,IADK,CACA,UAAM,CACVE,KAAK,CAAC,mBAAD,CAAL,CACD,CAHK,CAXc,yDAAH,kBAAVyB,CAAAA,UAAU,2CAAhB,CAmBD,mBACE,wCACN,aAAK,KAAK,CAAE,CAACE,eAAe,CAAC,UAAjB,CAAZ,wBACC,KAAC,YAAD,IADD,cAEA,kCAEE,aAAK,SAAS,CAAC,eAAf,wBACI,YAAK,SAAS,CAAC,UAAf,uBACA,YAAI,SAAS,CAAC,WAAd,wBACI,WAAI,SAAS,CAAC,cAAd,kBADJ,cAEI,iCAAI,UAAG,IAAI,CAAC,gBAAR,CAAyB,KAAK,CAAE,CAACC,KAAK,CAAC,SAAP,CAAhC,CAAmD,SAAS,CAAC,YAA7D,yBAAJ,EAFJ,cAII,iCAAI,UAAG,IAAI,CAAC,gBAAR,CAAyB,SAAS,CAAC,YAAnC,wBAAJ,EAJJ,GADA,EADJ,cAWI,aAAK,SAAS,CAAC,yBAAf,wBACG,aAAK,SAAS,CAAC,kBAAf,wBACC,YAAK,SAAS,CAAC,4BAAf,qBADD,cAEC,YAAK,SAAS,CAAC,WAAf,uBAA4B,eAAQ,OAAO,CAAE5D,UAAjB,CAA6B,SAAS,CAAC,cAAvC,yBAA5B,EAFD,GADH,cAKG,YAAK,SAAS,CAAC,8BAAf,uBACA,MAAC,KAAD,EAAO,UAAU,KAAjB,CAAkB,KAAK,KAAvB,wBACE,oCACG,mCACA,0BADA,cAEA,gCAFA,cAGA,4BAHA,cAIA,mCAJA,cAKA,6BALA,cAMA,gCANA,cAQA,4BARA,cASA,8BATA,GADH,EADF,cAcE,uBACEoC,GAAG,EAAIA,GAAG,CAACyB,GAAJ,CAAQ,SAAAL,QAAQ,CAAE,CAC1B,mBACA,mCACE,oBAAKA,QAAQ,CAACrD,GAAd,EADF,cAEE,oBAAKqD,QAAQ,CAACnD,QAAd,EAFF,cAGE,oBAAKmD,QAAQ,CAACjD,KAAd,EAHF,cAIE,oBAAKiD,QAAQ,CAAC3C,IAAd,EAJF,cAKE,oBAAK2C,QAAQ,CAAC/C,KAAd,EALF,cAME,oBAAK+C,QAAQ,CAAC7C,GAAd,EANF,cAQE,iCAAI,KAAC,MAAD,EAAQ,OAAO,CAAE,yBAAMmC,CAAAA,mBAAmB,CAACU,QAAQ,CAACrD,GAAV,CAAzB,EAAjB,CAA0D,SAAS,CAAC,UAApE,kBAAJ,EARF,cASE,iCAAI,KAAC,MAAD,EAAQ,SAAS,CAAC,UAAlB,CAA6B,OAAO,CAAE,yBAAMsD,CAAAA,UAAU,CAACD,QAAQ,CAACrD,GAAV,CAAhB,EAAtC,oBAAJ,EATF,GADA,CAaF,CAdU,CADT,EAdF,GADA,EALH,GAXJ,GAFF,EAFA,GADM,cAgEN,MAAC,KAAD,EACQ,IAAI,CAAEN,IADd,CAEQ,MAAM,CAAEE,WAFhB,CAGQ,QAAQ,CAAC,QAHjB,CAIQ,QAAQ,CAAE,KAJlB,CAKQ,QAAQ,KALhB,wBAOQ,KAAC,KAAD,CAAO,MAAP,EAAc,WAAW,KAAzB,uBACE,KAAC,KAAD,CAAO,KAAP,0BADF,EAPR,cAUQ,KAAC,KAAD,CAAO,IAAP,wBACA,MAAC,IAAD,EAAM,QAAQ,CAAE0B,YAAhB,wBACI,MAAC,IAAD,CAAM,KAAN,EAAY,EAAE,CAAC,KAAf,wBACE,KAAC,IAAD,CAAM,KAAN,iBADF,cAEE,KAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,MAAnB,CAA2B,QAAQ,KAAnC,CAAoC,WAAW,CAAC,UAAhD,CAA4D,KAAK,CAAEtB,GAAnE,CAAwE,QAAQ,CAAE,kBAACuB,CAAD,QAAOtB,CAAAA,MAAM,CAACsB,CAAC,CAACoC,MAAF,CAASC,KAAV,CAAb,EAAlF,EAFF,GADJ,cAKI,MAAC,IAAD,CAAM,KAAN,EAAY,EAAE,CAAC,UAAf,wBACE,KAAC,IAAD,CAAM,KAAN,uBADF,cAEE,MAAC,IAAD,CAAM,OAAN,EAAc,EAAE,CAAC,QAAjB,CAA0B,QAAQ,KAAlC,CAAmC,WAAW,CAAC,gBAA/C,CAAgE,KAAK,CAAE1D,QAAvE,CAAiF,QAAQ,CAAE,kBAACqB,CAAD,QAAOpB,CAAAA,WAAW,CAACoB,CAAC,CAACoC,MAAF,CAASC,KAAV,CAAlB,EAA3F,wBACF,2CADE,cAEF,mCAFE,cAGF,uCAHE,cAIF,mCAJE,GAFF,GALJ,cAcI,MAAC,IAAD,CAAM,KAAN,EAAY,EAAE,CAAC,MAAf,wBACE,KAAC,IAAD,CAAM,KAAN,mBADF,cAEE,KAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,MAAnB,CAA2B,QAAQ,KAAnC,CAAoC,WAAW,CAAC,YAAhD,CAA8D,KAAK,CAAExD,KAArE,CAA4E,QAAQ,CAAE,kBAACmB,CAAD,QAAOlB,CAAAA,OAAO,CAACkB,CAAC,CAACoC,MAAF,CAASC,KAAV,CAAd,EAAtF,EAFF,GAdJ,cAkBI,MAAC,IAAD,CAAM,KAAN,EAAY,EAAE,CAAC,aAAf,wBACE,KAAC,IAAD,CAAM,KAAN,0BADF,cAEE,KAAC,IAAD,CAAM,OAAN,EAAc,EAAE,CAAC,UAAjB,CAA4B,IAAI,CAAC,GAAjC,CAAqC,QAAQ,KAA7C,CAA8C,WAAW,CAAC,oBAA1D,CAAgF,KAAK,CAAElD,IAAvF,CAA6F,QAAQ,CAAE,kBAACa,CAAD,QAAOZ,CAAAA,OAAO,CAACY,CAAC,CAACoC,MAAF,CAASC,KAAV,CAAd,EAAvG,EAFF,GAlBJ,cAsBI,MAAC,IAAD,CAAM,KAAN,EAAY,EAAE,CAAC,OAAf,wBACE,KAAC,IAAD,CAAM,KAAN,oBADF,cAEE,KAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,MAAnB,CAA2B,QAAQ,KAAnC,CAAoC,WAAW,CAAC,aAAhD,CAA+D,KAAK,CAAEtD,KAAtE,CAA6E,QAAQ,CAAE,kBAACiB,CAAD,QAAOhB,CAAAA,QAAQ,CAACgB,CAAC,CAACoC,MAAF,CAASC,KAAV,CAAf,EAAvF,EAFF,GAtBJ,cA0BI,MAAC,IAAD,CAAM,KAAN,EAAY,EAAE,CAAC,KAAf,wBACE,KAAC,IAAD,CAAM,KAAN,uBADF,cAEE,KAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,MAAnB,CAA2B,QAAQ,KAAnC,CAAoC,WAAW,CAAC,gBAAhD,CAAkE,KAAK,CAAEpD,GAAzE,CAA8E,QAAQ,CAAE,kBAACe,CAAD,QAAOd,CAAAA,MAAM,CAACc,CAAC,CAACoC,MAAF,CAASC,KAAV,CAAb,EAAxF,EAFF,GA1BJ,cA8BI,MAAC,IAAD,CAAM,KAAN,EAAY,EAAE,CAAC,OAAf,wBACE,KAAC,IAAD,CAAM,KAAN,oBADF,cAEE,KAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,QAAnB,CAA6B,QAAQ,KAArC,CAAsC,WAAW,CAAC,cAAlD,CAAkE,KAAK,CAAEhD,GAAzE,CAA8E,QAAQ,CAAE,kBAACW,CAAD,QAAOV,CAAAA,MAAM,CAACU,CAAC,CAACoC,MAAF,CAASC,KAAV,CAAb,EAAxF,EAFF,GA9BJ,cAkCI,KAAC,MAAD,EAAS,SAAS,CAAC,YAAnB,CAAiC,KAAK,CAAE,CAAEC,UAAU,CAAE/C,MAAM,CAAG,QAAH,CAAc,SAAlC,CAAxC,CAAuF,IAAI,CAAC,QAA5F,oBAlCJ,GADA,EAVR,GAhEM,cAoHC,MAAC,KAAD,EAEC,IAAI,CAAEhB,MAFP,CAGC,MAAM,CAAE,wBAAMC,CAAAA,SAAS,CAAC,KAAD,CAAf,EAHT,CAKC,kBAAgB,8BALjB,CAMC,QAAQ,KANT,wBASC,KAAC,KAAD,CAAO,MAAP,EAAc,WAAW,KAAzB,uBACE,KAAC,KAAD,CAAO,KAAP,2BADF,EATD,cAYG,MAAC,KAAD,CAAO,IAAP,EAAY,EAAE,CAAC,8BAAf,wBACA,MAAC,IAAD,CAAM,KAAN,EAAY,EAAE,CAAC,OAAf,wBACI,KAAC,IAAD,CAAM,KAAN,oBADJ,cAEI,KAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,MAAnB,CAA2B,QAAQ,KAAnC,CAAoC,WAAW,CAAC,aAAhD,CAA+D,KAAK,CAAEmB,SAAtE,CAAiF,QAAQ,CAAE,kBAACK,CAAD,QAAOJ,CAAAA,YAAY,CAACI,CAAC,CAACoC,MAAF,CAASC,KAAV,CAAnB,EAA3F,EAFJ,GADA,cAKE,MAAC,IAAD,CAAM,KAAN,EAAY,EAAE,CAAC,KAAf,wBACE,KAAC,IAAD,CAAM,KAAN,uBADF,cAEE,KAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,MAAnB,CAA2B,QAAQ,KAAnC,CAAoC,WAAW,CAAC,gBAAhD,CAAkE,KAAK,CAAExC,OAAzE,CAAkF,QAAQ,CAAE,kBAACG,CAAD,QAAOF,CAAAA,UAAU,CAACE,CAAC,CAACoC,MAAF,CAASC,KAAV,CAAjB,EAA5F,EAFF,GALF,cASE,KAAC,MAAD,EAAQ,OAAO,CAAEhB,cAAjB,CAAiC,SAAS,CAAC,YAA3C,CAAyD,KAAK,CAAE,CAAEiB,UAAU,CAAE/C,MAAM,CAAG,QAAH,CAAc,SAAlC,CAAhE,CAA+G,IAAI,CAAC,QAApH,oBATF,GAZH,GApHD,GADF,CAqJH,CACD,cAAerB,CAAAA,OAAf","sourcesContent":["import React ,{useState,useEffect} from \"react\"\nimport {Table,Modal,Button,Form} from 'react-bootstrap';\nimport \"./Admin_home.css\"\nimport {db} from '../../firebase'\nimport Admin_navbar from './Admin_navbar'\n\n\nfunction Example() {\n    const [show, setShow] = useState(false);\n    const handleClose = () => setShow(false);\n    const handleShow = () => setShow(true);\n    const [lgShow, setLgShow] = useState(false);\n\n\n  const [key, setKey] = useState(\"\");\n  const [category, setCategory] = useState(\"\");\n  const [title, setName] = useState(\"\");\n  const [price, setPrice] = useState(\"\");\n  const [qty, setQty] = useState(\"\");\n  const [desc, setDesc] = useState(\"\");\n  const [img,setImg] =useState(\"\");\n  const [loader, setLoader] = useState(false);\n\n  // Edit Product\n  const [editKey, setEditKey] = useState(null);\n  const [editPrice, setEditPrice] = useState(price);\n  const [editQty, setEditQty] = useState(qty);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setLoader(true);\n\n    db.collection(\"products\")\n      .add({\n        key:key,\n        category:category,\n        title:title,\n        price:price,\n        qty:qty,\n        desc:desc,\n        img:img,\n      })\n      .then(() => {\n        handleClose(false);\n        setLoader(false);\n        fetchPro();\n        alert(\"Your product has been submittedüëç\");\n      })\n      .catch((error) => {\n        alert(error.message);\n        setLoader(false);\n      });\n\n    setKey(\"\");\n    setCategory(\"\");\n    setPrice(\"\");\n    setQty(\"\");\n    setName(\"\");\n    setDesc(\"\");\n    setImg(\"\");\n    \n    };\n      \n\n    //  FECTH DATA\n\n     const [pro,setPro]=useState([])\n     window.addEventListener('load', () => {\n      fetchPro();\n    });\n     const fetchPro=async()=>{\n       setPro([]);\n       const response=db.collection('products');\n       const data=await response.get();\n       data.docs.forEach(item=>{\n        setPro(pro=>[...pro,item.data()])\n       })\n     }\n     useEffect(() => {\n       fetchPro();\n     }, [])\n\n     // Edit Product\n\n     const onEditButtonClicked = (key) => {\n      //  console.log(\"key =\" + key);\n      setLgShow(true);\n      setEditKey(key);\n     }\n\n     const setEditChanges = async () => {\n      let index = -1;\n      let docId = \"\";\n      // referring the firebase database with collection name products\n      const res = db.collection(\"products\");\n      const data = await res.get();\n      //iterating the prducts received from database\n      data.docs.forEach((item, i) => {\n      \n        // checking which product needs to be edited\n        if(item.data().key == editKey) {\n          docId = item.id;\n          index = i;\n        }\n      }\n      )\n    \n      if(docId != \"\") {\n        //updating the database with the changes received\n        await res.doc(docId).update({\n          price:editPrice,\n          qty:editQty,\n        })\n        //handling the success\n        .then(() => {\n          let updatedProduct = pro[index];\n          updatedProduct.price = editPrice;\n          updatedProduct.qty = editQty;\n          let products = pro;\n          products[index] = updatedProduct;\n          setPro(products);\n          alert(\"Changes have been made sucessfully !!\");\n          \n        })\n        //handling the error\n        .catch(() => {\n          alert(\"Changes cannot be made !!\");\n        });\n      }\n      \n       setEditPrice(\"\");\n       setEditQty(\"\");\n       setLgShow(false);\n     }\n\n     //delete data\n     const deleteData = async ()=>{\n  let docId = \"\";\n  const res = db.collection(\"products\");\n  const data = await res.get();\n  data.docs.forEach((item) => {\n    // console.log(item.data());\n    if(item.data().key == editKey) {\n      docId = item.id;\n    }\n  })\n  if(docId != \"\") {\n    await res.doc(docId).delete()\n    .then(() => {\n      alert(\"Product Deleted!!\");\n    })\n }\n}\n\n\n    return (\n      <>\n<div style={{backgroundColor:\" #e1e5ea\"}}>\n <Admin_navbar/>\n<div>\n   {/* MENU */}\n  <div className=\"row col-md-12\">\n      <div className=\"col-md-3\">\n      <dl className=\"menu_list\">\n          <dd className=\"menu_heading\">Menu</dd>\n          <dd><a href=\"/Admin_product\" style={{color:\"#bd965b\"}} className=\"admin_link\">Add Product</a></dd>\n          \n          <dd><a href=\"/Admin_contact\" className=\"admin_link\">Contact Us</a></dd>\n      </dl>\n      </div>\n\n      {/* PRODUCT */}\n      <div className=\"category_menu col-md-9 \">\n         <div className=\"row category_row\">\n          <div className=\"category_heading col-md-10\">Product</div>\n          <div className=\"col-md-2 \" ><button onClick={handleShow} className=\"add_category\">Add Product</button></div>\n         </div>\n         <div className=\"col-md-12 p-3 category_table\">\n         <Table responsive hover>\n           <thead>\n              <tr>\n              <th>ID</th>\n              <th>Category</th>\n              <th>Name</th>\n              <th>Description</th>\n              <th>Price</th>\n              <th>Quantity</th>\n              {/* <th>img</th> */}\n              <th>Edit</th>\n              <th>Delete</th>\n              </tr>\n           </thead>\n           <tbody>\n           { pro && pro.map(products=>{\n            return(\n            <tr>\n              <td>{products.key}</td>\n              <td>{products.category}</td>\n              <td>{products.title}</td>\n              <td>{products.desc}</td>\n              <td>{products.price}</td>\n              <td>{products.qty}</td>\n              {/* <td>{products.img}</td> */}\n              <td><Button onClick={() => onEditButtonClicked(products.key)} className=\"btn-dark\">Edit</Button></td>\n              <td><Button className=\"btn-dark\" onClick={() => deleteData(products.key)}>Delete</Button></td>\n            </tr> \n            \n        )}\n           )\n            }\n\n\n           </tbody>\n           </Table>\n         </div>\n      </div>\n  </div>\n</div>\n</div>\n{/* MODAL FORM */}\n<Modal\n        show={show}\n        onHide={handleClose}\n        backdrop=\"static\"\n        keyboard={false}\n        centered\n      >\n        <Modal.Header closeButton>\n          <Modal.Title>Add Product</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n        <Form onSubmit={handleSubmit}>\n            <Form.Group id=\"key\">\n              <Form.Label>Id</Form.Label>\n              <Form.Control type=\"text\"  required placeholder=\"Enter id\"  value={key} onChange={(e) => setKey(e.target.value)}/>\n            </Form.Group>\n            <Form.Group id=\"category\">\n              <Form.Label>Category</Form.Label>\n              <Form.Control as=\"select\" required placeholder=\"Enter category\" value={category} onChange={(e) => setCategory(e.target.value)}>\n            <option>Click to Choose</option>\n            <option>Fashion</option>\n            <option>Electronics</option>\n            <option>Grocery</option>\n             </Form.Control>\n             </Form.Group>\n            <Form.Group id=\"name\">\n              <Form.Label>Name</Form.Label>\n              <Form.Control type=\"text\"  required placeholder=\"Enter Name\"  value={title} onChange={(e) => setName(e.target.value)}/>\n            </Form.Group>\n            <Form.Group id=\"description\">\n              <Form.Label>Description</Form.Label>\n              <Form.Control as=\"textarea\" rows=\"3\" required placeholder=\"Type a Description\"  value={desc} onChange={(e) => setDesc(e.target.value)}/>\n            </Form.Group>\n            <Form.Group id=\"price\">\n              <Form.Label>Price</Form.Label>\n              <Form.Control type=\"text\"  required placeholder=\"Enter Price\"  value={price} onChange={(e) => setPrice(e.target.value)}/>\n            </Form.Group>\n            <Form.Group id=\"qty\">\n              <Form.Label>Quantity</Form.Label>\n              <Form.Control type=\"text\"  required placeholder=\"Enter Quantity\"  value={qty} onChange={(e) => setQty(e.target.value)}/>\n            </Form.Group>\n            <Form.Group id=\"image\">\n              <Form.Label>Image</Form.Label>\n              <Form.Control type=\"string\"  required placeholder=\"Upload Image\"  value={img} onChange={(e) => setImg(e.target.value)}/>\n            </Form.Group>\n            <Button  className=\"w-100 mt-3\"  style={{ background: loader ? 'afb9c8' : '#34656d' }} type=\"submit\">\n              Submit\n            </Button>\n            </Form>\n         </Modal.Body> \n      </Modal>\n      \n       <Modal\n        \n        show={lgShow}\n        onHide={() => setLgShow(false)}\n       \n        aria-labelledby=\"example-modal-sizes-title-lg\" \n        centered\n      >\n        {/* setting for the modal of the edit product */}\n        <Modal.Header closeButton>\n          <Modal.Title>Edit Product</Modal.Title>\n        </Modal.Header>\n          <Modal.Body id=\"example-modal-sizes-title-lg\">\n          <Form.Group id=\"price\">\n              <Form.Label>Price</Form.Label>\n              <Form.Control type=\"text\"  required placeholder=\"Enter Price\"  value={editPrice} onChange={(e) => setEditPrice(e.target.value)}/>\n            </Form.Group>\n            <Form.Group id=\"qty\">\n              <Form.Label>Quantity</Form.Label>\n              <Form.Control type=\"text\"  required placeholder=\"Enter Quantity\"  value={editQty} onChange={(e) => setEditQty(e.target.value)}/>\n            </Form.Group>\n            <Button onClick={setEditChanges} className=\"w-100 mt-3\"  style={{ background: loader ? 'afb9c8' : '#34656d' }} type=\"submit\">\n              Submit\n            </Button>\n          </Modal.Body>\n        \n        \n      </Modal>\n</> \n\n    );\n      \n}\nexport default Example"]},"metadata":{},"sourceType":"module"}