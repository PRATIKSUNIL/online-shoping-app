{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PRATI\\\\Downloads\\\\E-Kart-main (1)\\\\E-Kart-main\\\\src\\\\components\\\\Cart\\\\CartApp.js\";\nimport React from 'react';\nimport Cart from './Cart'; // import Navbar from './Navbar';\n\nimport firebase from 'firebase';\nimport Header from '../../components/Header';\nimport { FaArrowRight } from \"react-icons/fa\";\nimport \"./cart.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass CartApp extends React.Component {\n  //used to define our components default state\n  constructor() {\n    super();\n\n    this.handleIncreaseQuantity = product => {\n      const {\n        cart\n      } = this.state;\n      const index = cart.indexOf(product); //reference of the document\n\n      const docRef = this.db.collection(\"cart\").doc(cart[index].id); //here as we update the data on firebase then onSnapshot in componentDidMount\n      // will be called and will referesh the data inbrowser\n\n      docRef.update({\n        qty: cart[index].qty + 1\n      }).then(() => {\n        console.log(\"Document updated sucessfully\");\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.handleDecreaseQuantity = product => {\n      const {\n        cart\n      } = this.state;\n      const index = cart.indexOf(product);\n\n      if (cart[index].qty === 0) {\n        return;\n      }\n\n      const docRef = this.db.collection(\"cart\").doc(cart[index].id);\n      docRef.update({\n        qty: cart[index].qty - 1\n      }).then(() => {\n        console.log(\"Document updated sucessfully\");\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.handleDeleteProduct = id => {\n      const docRef = this.db.collection(\"cart\").doc(id);\n      docRef.delete().then(() => {\n        console.log(\"Deleted sucessfully\");\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.getcountOfCartItems = () => {\n      const {\n        cart\n      } = this.state;\n      let count = 0;\n      cart.forEach(product => {\n        count += product.qty;\n      });\n      return count;\n    };\n\n    this.getcartTotal = () => {\n      const {\n        cart\n      } = this.state;\n      let cartTotal = 0;\n      cart.map(product => {\n        if (product.qty > 0) {\n          cartTotal = cartTotal + product.qty * product.price;\n        }\n\n        return \"\";\n      });\n      return cartTotal;\n    };\n\n    this.addProduct = () => {\n      this.db.collection(\"cart\").add({\n        img: \"\",\n        price: 900,\n        qty: 3,\n        title: \"Washing Machine\"\n      }) //docref is refernce of above object\n      .then(docRef => {\n        docRef.get().then(snapshot => {\n          console.log(\"Product has been added\", snapshot.data());\n        });\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.state = {\n      cart: [],\n      loading: true\n    }; //binded\n\n    this.db = firebase.firestore();\n  } //it is called only once in a lifecycle after component is rendered first time\n  //it is used to make calls to api\n  //we fetched data here so that it will called just after our app is mounted\n\n\n  componentDidMount() {\n    //metod chaining is used here to make code short\n    //we have added onSnapshot eventlistener provided by firebase\n    //inorder to auto referesh the app using setstate\n    //onSnapshot is called whenever something changes in firebase collection\n    this.db.collection(\"cart\").onSnapshot(snapshot => {\n      //Query snapshot has a property docs which is an array\n      //iterating through docs\n      const cart = snapshot.docs.map(doc => {\n        const data = doc.data(); //data storing documen key\n\n        data[\"id\"] = doc.id;\n        return data;\n      }); //here we setstate so that after fetching the data browser will\n      //rerender and show data\n\n      this.setState({\n        cart: cart,\n        loading: false\n      });\n    });\n  } //function to increase the quantity of product\n  //We will pass this as props to cart\n\n\n  render() {\n    //getting products from state\n    const {\n      cart,\n      loading\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        count: this.getcountOfCartItems()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this), loading && /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Loading Products...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row col-md-12 my-4 container-fluid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-7\",\n          children: /*#__PURE__*/_jsxDEV(Cart, {\n            onIncreaseQuantity: this.handleIncreaseQuantity,\n            onDecreaseQuantity: this.handleDecreaseQuantity,\n            onDeleteProduct: this.handleDeleteProduct,\n            cart: cart\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-5\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cart-div\",\n            style: {\n              padding: 30,\n              fontSize: 20,\n              marginLeft: \"50px\",\n              marginRight: \"30px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-white\",\n              style: {\n                padding: \"9px\",\n                marginTop: \"10px\",\n                marginBottom: \"10px\"\n              },\n              children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"The Total Amount\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 96\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-white\",\n              style: {\n                padding: \"5px\",\n                fontWeight: \"15\"\n              },\n              children: [\"Temporary Amount\", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"mx-5\",\n                children: [\"$\", this.getcartTotal()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 91\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-white\",\n              style: {\n                padding: \"5px\",\n                fontWeight: \"15\"\n              },\n              children: [\"Shipping Cost Added\", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"mx-5\",\n                children: \"$0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 94\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-white\",\n              style: {\n                padding: \"9px\",\n                marginTop: \"8px\"\n              },\n              children: [\"The Total Amount\", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"mx-5\",\n                children: [\"$\", this.getcartTotal()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 92\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 10\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 10\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"/checkout\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"w-50 mx-2 mb-1 checkout-btn\",\n                children: \"Checkout\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 31\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 10\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 10\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mx-2 mb-1 mb-4 mt-3\",\n              style: {\n                fontSize: \"18px\",\n                marginTop: \"10px\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                href: \"/product\",\n                style: {\n                  textDecoration: \"none\",\n                  color: \"black\"\n                },\n                children: \"Continue Shopping\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 88\n              }, this), /*#__PURE__*/_jsxDEV(FaArrowRight, {\n                style: {\n                  marginLeft: \"5px\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 10\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 10\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default CartApp;","map":{"version":3,"sources":["C:/Users/PRATI/Downloads/E-Kart-main (1)/E-Kart-main/src/components/Cart/CartApp.js"],"names":["React","Cart","firebase","Header","FaArrowRight","CartApp","Component","constructor","handleIncreaseQuantity","product","cart","state","index","indexOf","docRef","db","collection","doc","id","update","qty","then","console","log","catch","error","handleDecreaseQuantity","handleDeleteProduct","delete","getcountOfCartItems","count","forEach","getcartTotal","cartTotal","map","price","addProduct","add","img","title","get","snapshot","data","loading","firestore","componentDidMount","onSnapshot","docs","setState","render","padding","fontSize","marginLeft","marginRight","marginTop","marginBottom","fontWeight","textDecoration","color"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Cart from './Cart';\n// import Navbar from './Navbar';\nimport firebase from 'firebase'\nimport Header from '../../components/Header'\nimport { FaArrowRight } from \"react-icons/fa\";\nimport \"./cart.css\"\n\nclass CartApp extends React.Component {\n  //used to define our components default state\n  constructor() {\n    super();\n    this.state = {\n      cart: [],\n      loading: true\n    };\n    //binded\n    this.db = firebase.firestore();\n  }\n\n  //it is called only once in a lifecycle after component is rendered first time\n  //it is used to make calls to api\n  //we fetched data here so that it will called just after our app is mounted\n  componentDidMount() {\n    //metod chaining is used here to make code short\n    //we have added onSnapshot eventlistener provided by firebase\n    //inorder to auto referesh the app using setstate\n    //onSnapshot is called whenever something changes in firebase collection\n    this.db.collection(\"cart\").onSnapshot(snapshot => {\n      //Query snapshot has a property docs which is an array\n      //iterating through docs\n      const cart = snapshot.docs.map(doc => {\n        const data = doc.data();\n        //data storing documen key\n        data[\"id\"] = doc.id;\n        return data;\n      });\n      //here we setstate so that after fetching the data browser will\n      //rerender and show data\n      this.setState({ cart: cart, loading: false });\n    });\n  }\n\n  //function to increase the quantity of product\n  //We will pass this as props to cart\n  handleIncreaseQuantity = product => {\n    const { cart } = this.state;\n    const index = cart.indexOf(product);\n\n   //reference of the document\n    const docRef = this.db.collection(\"cart\").doc(cart[index].id);\n\n    //here as we update the data on firebase then onSnapshot in componentDidMount\n    // will be called and will referesh the data inbrowser\n    docRef\n      .update({ qty: cart[index].qty + 1 })\n      .then(() => {\n        console.log(\"Document updated sucessfully\");\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  };\n\n  handleDecreaseQuantity = product => {\n    const { cart } = this.state;\n    const index = cart.indexOf(product);\n\n    if (cart[index].qty === 0) {\n      return;\n    }\n   \n    const docRef = this.db.collection(\"cart\").doc(cart[index].id);\n\n    docRef\n      .update({ qty: cart[index].qty - 1 })\n      .then(() => {\n        console.log(\"Document updated sucessfully\");\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  };\n\n  handleDeleteProduct = id => {\n\n    const docRef = this.db.collection(\"cart\").doc(id);\n\n    docRef\n    .delete()\n    .then(() => {\n      console.log(\"Deleted sucessfully\");\n    })\n    .catch(error => {\n      console.log(error);\n    });\n  };\n\n  getcountOfCartItems = () => {\n    const { cart } = this.state;\n    let count = 0;\n\n    cart.forEach(product => {\n      count += product.qty;\n    });\n\n    return count;\n  };\n\n  getcartTotal = () => {\n    const { cart } = this.state;\n    let cartTotal = 0;\n\n    cart.map(product => {\n      if (product.qty > 0) {\n        cartTotal = cartTotal + product.qty * product.price;\n      }\n      return \"\";\n    });\n\n    return cartTotal;\n  };\n\n  addProduct = () => {\n    this.db\n      .collection(\"cart\")\n      .add({\n        img: \"\",\n        price: 900,\n        qty: 3,\n        title: \"Washing Machine\"\n      })\n      //docref is refernce of above object\n      .then(docRef => {\n        docRef.get().then(snapshot => {\n          console.log(\"Product has been added\", snapshot.data());\n        });\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  };\n\n  render() {\n    //getting products from state\n    const { cart, loading } = this.state;\n    return (\n      <div className=\"App\">\n       {/* passing prop count to navbar component */}\n        <Header  count={this.getcountOfCartItems()}/>\n       \n        {loading && <h1>Loading Products...</h1>}\n        <div className=\"row col-md-12 my-4 container-fluid\">\n        <div className=\"col-md-7\">\n          {/* passing all the components to cart via props */}\n        <Cart\n          onIncreaseQuantity={this.handleIncreaseQuantity}\n          onDecreaseQuantity={this.handleDecreaseQuantity}\n          onDeleteProduct={this.handleDeleteProduct}\n          cart={cart}\n        />\n        </div>\n        <div className=\"col-md-5\">\n        <div className=\"cart-div\" style={{ padding: 30, fontSize: 20, marginLeft:\"50px\",marginRight:\"30px\"}}>\n        <div className=\"bg-white\" style={{padding:\"9px\",marginTop:\"10px\",marginBottom:\"10px\"}}><h3>The Total Amount</h3></div>\n        <div className=\"bg-white\" style={{padding:\"5px\",fontWeight:\"15\"}}>Temporary Amount<span className=\"mx-5\">${this.getcartTotal()}</span></div>\n        <div className=\"bg-white\" style={{padding:\"5px\",fontWeight:\"15\"}}>Shipping Cost Added<span className=\"mx-5\" >$0</span></div>\n        <hr></hr>\n         <div className=\"bg-white\" style={{padding:\"9px\",marginTop:\"8px\"}}>The Total Amount<span className=\"mx-5\" >${this.getcartTotal()}</span></div>\n         <br></br>\n         <a  href=\"/checkout\"><button className=\"w-50 mx-2 mb-1 checkout-btn\">Checkout</button></a>\n         <br></br>\n         <p className=\"mx-2 mb-1 mb-4 mt-3\" style={{fontSize:\"18px\",marginTop:\"10px\"}}><a href=\"/product\" style={{textDecoration:\"none\",color:\"black\"}}>Continue Shopping</a>\n         <FaArrowRight style={{marginLeft:\"5px\"}}/></p>\n        </div>\n        </div>\n      </div>\n      </div>\n    );\n  }\n}\n\nexport default CartApp;\n\n"]},"metadata":{},"sourceType":"module"}