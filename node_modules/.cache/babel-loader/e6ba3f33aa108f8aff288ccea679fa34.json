{"ast":null,"code":"import _classCallCheck from\"F:/online/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"F:/online/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"F:/online/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"F:/online/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import Cart from'./Cart';// import Navbar from './Navbar';\nimport firebase from'firebase';import Header from'../../components/Header';import{FaArrowRight}from\"react-icons/fa\";import\"./cart.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CartApp=/*#__PURE__*/function(_React$Component){_inherits(CartApp,_React$Component);var _super=_createSuper(CartApp);//used to define our components default state\nfunction CartApp(){var _this;_classCallCheck(this,CartApp);_this=_super.call(this);_this.handleIncreaseQuantity=function(product){var cart=_this.state.cart;var index=cart.indexOf(product);//reference of the document\nvar docRef=_this.db.collection(\"cart\").doc(cart[index].id);//here as we update the data on firebase then onSnapshot in componentDidMount\n// will be called and will referesh the data inbrowser\ndocRef.update({qty:cart[index].qty+1}).then(function(){console.log(\"Document updated sucessfully\");}).catch(function(error){console.log(error);});};_this.handleDecreaseQuantity=function(product){var cart=_this.state.cart;var index=cart.indexOf(product);if(cart[index].qty===0){return;}var docRef=_this.db.collection(\"cart\").doc(cart[index].id);docRef.update({qty:cart[index].qty-1}).then(function(){console.log(\"Document updated sucessfully\");}).catch(function(error){console.log(error);});};_this.handleDeleteProduct=function(id){var docRef=_this.db.collection(\"cart\").doc(id);docRef.delete().then(function(){console.log(\"Deleted sucessfully\");}).catch(function(error){console.log(error);});};_this.getcountOfCartItems=function(){var cart=_this.state.cart;var count=0;cart.forEach(function(product){count+=product.qty;});return count;};_this.getcartTotal=function(){var cart=_this.state.cart;var cartTotal=0;cart.map(function(product){if(product.qty>0){cartTotal=cartTotal+product.qty*product.price;}return\"\";});return cartTotal;};_this.addProduct=function(){_this.db.collection(\"cart\").add({img:\"\",price:900,qty:3,title:\"Washing Machine\"})//docref is refernce of above object\n.then(function(docRef){docRef.get().then(function(snapshot){console.log(\"Product has been added\",snapshot.data());});}).catch(function(error){console.log(error);});};_this.state={cart:[],loading:true};//binded\n_this.db=firebase.firestore();return _this;}//it is called only once in a lifecycle after component is rendered first time\n//it is used to make calls to api\n//we fetched data here so that it will called just after our app is mounted\n_createClass(CartApp,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;//metod chaining is used here to make code short\n//we have added onSnapshot eventlistener provided by firebase\n//inorder to auto referesh the app using setstate\n//onSnapshot is called whenever something changes in firebase collection\nthis.db.collection(\"cart\").onSnapshot(function(snapshot){//Query snapshot has a property docs which is an array\n//iterating through docs\nvar cart=snapshot.docs.map(function(doc){var data=doc.data();//data storing documen key\ndata[\"id\"]=doc.id;return data;});//here we setstate so that after fetching the data browser will\n//rerender and show data\n_this2.setState({cart:cart,loading:false});});}//function to increase the quantity of product\n//We will pass this as props to cart\n},{key:\"render\",value:function render(){//getting products from state\nvar _this$state=this.state,cart=_this$state.cart,loading=_this$state.loading;return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Header,{count:this.getcountOfCartItems()}),loading&&/*#__PURE__*/_jsx(\"h1\",{children:\"Loading Products...\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row col-md-12 my-4 container-fluid\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-7\",children:/*#__PURE__*/_jsx(Cart,{onIncreaseQuantity:this.handleIncreaseQuantity,onDecreaseQuantity:this.handleDecreaseQuantity,onDeleteProduct:this.handleDeleteProduct,cart:cart})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cart-div\",style:{padding:30,fontSize:20,marginLeft:\"50px\",marginRight:\"30px\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white\",style:{padding:\"9px\",marginTop:\"10px\",marginBottom:\"10px\"},children:/*#__PURE__*/_jsx(\"h3\",{children:\"The Total Amount\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white\",style:{padding:\"5px\",fontWeight:\"15\"},children:[\"Temporary Amount\",/*#__PURE__*/_jsxs(\"span\",{className:\"mx-5\",children:[\"$\",this.getcartTotal()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white\",style:{padding:\"5px\",fontWeight:\"15\"},children:[\"Shipping Cost Added\",/*#__PURE__*/_jsx(\"span\",{className:\"mx-5\",children:\"$0\"})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white\",style:{padding:\"9px\",marginTop:\"8px\"},children:[\"The Total Amount\",/*#__PURE__*/_jsxs(\"span\",{className:\"mx-5\",children:[\"$\",this.getcartTotal()]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"a\",{href:\"/checkout\",children:/*#__PURE__*/_jsx(\"button\",{className:\"w-50 mx-2 mb-1 checkout-btn\",children:\"Checkout\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"p\",{className:\"mx-2 mb-1 mb-4 mt-3\",style:{fontSize:\"18px\",marginTop:\"10px\"},children:[/*#__PURE__*/_jsx(\"a\",{href:\"/product\",style:{textDecoration:\"none\",color:\"black\"},children:\"Continue Shopping\"}),/*#__PURE__*/_jsx(FaArrowRight,{style:{marginLeft:\"5px\"}})]})]})})]})]});}}]);return CartApp;}(React.Component);export default CartApp;","map":{"version":3,"sources":["F:/online/src/components/Cart/CartApp.js"],"names":["React","Cart","firebase","Header","FaArrowRight","CartApp","handleIncreaseQuantity","product","cart","state","index","indexOf","docRef","db","collection","doc","id","update","qty","then","console","log","catch","error","handleDecreaseQuantity","handleDeleteProduct","delete","getcountOfCartItems","count","forEach","getcartTotal","cartTotal","map","price","addProduct","add","img","title","get","snapshot","data","loading","firestore","onSnapshot","docs","setState","padding","fontSize","marginLeft","marginRight","marginTop","marginBottom","fontWeight","textDecoration","color","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Cart from './Cart';\n// import Navbar from './Navbar';\nimport firebase from 'firebase'\nimport Header from '../../components/Header'\nimport { FaArrowRight } from \"react-icons/fa\";\nimport \"./cart.css\"\n\nclass CartApp extends React.Component {\n  //used to define our components default state\n  constructor() {\n    super();\n    this.state = {\n      cart: [],\n      loading: true\n    };\n    //binded\n    this.db = firebase.firestore();\n  }\n\n  //it is called only once in a lifecycle after component is rendered first time\n  //it is used to make calls to api\n  //we fetched data here so that it will called just after our app is mounted\n  componentDidMount() {\n    //metod chaining is used here to make code short\n    //we have added onSnapshot eventlistener provided by firebase\n    //inorder to auto referesh the app using setstate\n    //onSnapshot is called whenever something changes in firebase collection\n    this.db.collection(\"cart\").onSnapshot(snapshot => {\n      //Query snapshot has a property docs which is an array\n      //iterating through docs\n      const cart = snapshot.docs.map(doc => {\n        const data = doc.data();\n        //data storing documen key\n        data[\"id\"] = doc.id;\n        return data;\n      });\n      //here we setstate so that after fetching the data browser will\n      //rerender and show data\n      this.setState({ cart: cart, loading: false });\n    });\n  }\n\n  //function to increase the quantity of product\n  //We will pass this as props to cart\n  handleIncreaseQuantity = product => {\n    const { cart } = this.state;\n    const index = cart.indexOf(product);\n\n   //reference of the document\n    const docRef = this.db.collection(\"cart\").doc(cart[index].id);\n\n    //here as we update the data on firebase then onSnapshot in componentDidMount\n    // will be called and will referesh the data inbrowser\n    docRef\n      .update({ qty: cart[index].qty + 1 })\n      .then(() => {\n        console.log(\"Document updated sucessfully\");\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  };\n\n  handleDecreaseQuantity = product => {\n    const { cart } = this.state;\n    const index = cart.indexOf(product);\n\n    if (cart[index].qty === 0) {\n      return;\n    }\n   \n    const docRef = this.db.collection(\"cart\").doc(cart[index].id);\n\n    docRef\n      .update({ qty: cart[index].qty - 1 })\n      .then(() => {\n        console.log(\"Document updated sucessfully\");\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  };\n\n  handleDeleteProduct = id => {\n\n    const docRef = this.db.collection(\"cart\").doc(id);\n\n    docRef\n    .delete()\n    .then(() => {\n      console.log(\"Deleted sucessfully\");\n    })\n    .catch(error => {\n      console.log(error);\n    });\n  };\n\n  getcountOfCartItems = () => {\n    const { cart } = this.state;\n    let count = 0;\n\n    cart.forEach(product => {\n      count += product.qty;\n    });\n\n    return count;\n  };\n\n  getcartTotal = () => {\n    const { cart } = this.state;\n    let cartTotal = 0;\n\n    cart.map(product => {\n      if (product.qty > 0) {\n        cartTotal = cartTotal + product.qty * product.price;\n      }\n      return \"\";\n    });\n\n    return cartTotal;\n  };\n\n  addProduct = () => {\n    this.db\n      .collection(\"cart\")\n      .add({\n        img: \"\",\n        price: 900,\n        qty: 3,\n        title: \"Washing Machine\"\n      })\n      //docref is refernce of above object\n      .then(docRef => {\n        docRef.get().then(snapshot => {\n          console.log(\"Product has been added\", snapshot.data());\n        });\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  };\n\n  render() {\n    //getting products from state\n    const { cart, loading } = this.state;\n    return (\n      <div className=\"App\">\n       {/* passing prop count to navbar component */}\n        <Header  count={this.getcountOfCartItems()}/>\n       \n        {loading && <h1>Loading Products...</h1>}\n        <div className=\"row col-md-12 my-4 container-fluid\">\n        <div className=\"col-md-7\">\n          {/* passing all the components to cart via props */}\n        <Cart\n          onIncreaseQuantity={this.handleIncreaseQuantity}\n          onDecreaseQuantity={this.handleDecreaseQuantity}\n          onDeleteProduct={this.handleDeleteProduct}\n          cart={cart}\n        />\n        </div>\n        <div className=\"col-md-5\">\n        <div className=\"cart-div\" style={{ padding: 30, fontSize: 20, marginLeft:\"50px\",marginRight:\"30px\"}}>\n        <div className=\"bg-white\" style={{padding:\"9px\",marginTop:\"10px\",marginBottom:\"10px\"}}><h3>The Total Amount</h3></div>\n        <div className=\"bg-white\" style={{padding:\"5px\",fontWeight:\"15\"}}>Temporary Amount<span className=\"mx-5\">${this.getcartTotal()}</span></div>\n        <div className=\"bg-white\" style={{padding:\"5px\",fontWeight:\"15\"}}>Shipping Cost Added<span className=\"mx-5\" >$0</span></div>\n        <hr></hr>\n         <div className=\"bg-white\" style={{padding:\"9px\",marginTop:\"8px\"}}>The Total Amount<span className=\"mx-5\" >${this.getcartTotal()}</span></div>\n         <br></br>\n         <a  href=\"/checkout\"><button className=\"w-50 mx-2 mb-1 checkout-btn\">Checkout</button></a>\n         <br></br>\n         <p className=\"mx-2 mb-1 mb-4 mt-3\" style={{fontSize:\"18px\",marginTop:\"10px\"}}><a href=\"/product\" style={{textDecoration:\"none\",color:\"black\"}}>Continue Shopping</a>\n         <FaArrowRight style={{marginLeft:\"5px\"}}/></p>\n        </div>\n        </div>\n      </div>\n      </div>\n    );\n  }\n}\n\nexport default CartApp;\n\n"]},"metadata":{},"sourceType":"module"}